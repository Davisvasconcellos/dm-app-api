const pdfService = require('../services/pdfService');
const fs = require('fs');
const path = require('path');

async function verifyPdfService() {
  try {
    console.log('Starting PDF generation verification...');
    
    const htmlContent = `
      <!DOCTYPE html>
      <html>
        <head>
          <style>
            body { font-family: Arial, sans-serif; margin: 40px; }
            h1 { color: #333; }
            p { color: #666; font-size: 14px; }
            .box { border: 1px solid #ddd; padding: 20px; background: #f9f9f9; border-radius: 5px; }
          </style>
        </head>
        <body>
          <h1>DM-APP PDF Test</h1>
          <div class="box">
            <p>This is a test PDF generated by Puppeteer.</p>
            <p>Date: ${new Date().toLocaleString()}</p>
          </div>
        </body>
      </html>
    `;

    const buffer = await pdfService.generatePdf(htmlContent);
    
    const outputPath = path.join(__dirname, 'test-output.pdf');
    fs.writeFileSync(outputPath, buffer);
    
    console.log(`PDF successfully generated at: ${outputPath}`);
    console.log(`Size: ${buffer.length} bytes`);
    
  } catch (error) {
    console.error('PDF generation failed:', error);
  }
}

verifyPdfService();
